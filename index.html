<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Career Guidance Portal</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EGraduation Cap%3C/text%3E%3C/svg%3E">
</head>
<body class="bg-light">

  <!-- Header -->
  <header class="bg-primary text-white py-4 mb-5">
    <div class="container text-center">
      <h1 class="display-5 fw-bold d-flex align-items-center justify-content-center gap-2">
        <span>Graduation Cap</span> Career Guidance Portal
      </h1>
      <p class="lead mb-0">Find your ideal college and course — in India or Abroad</p>
    </div>
  </header>

  <div class="container">

    <!-- About Section -->
    <div class="card mx-auto mb-5" style="max-width: 800px;">
      <div class="card-body text-center">
        <h2 class="card-title">About This Platform</h2>
        <p class="card-text text-muted">
          This web application helps students and parents explore and compare universities based on tuition, eligibility, facilities, placements, and scholarships. 
          It also includes an aptitude test to match you with the best-fit college options.
        </p>
      </div>
    </div>

    <!-- Get Started -->
    <div class="text-center py-5">
      <h2 class="mb-4">Get Started</h2>
      <p class="text-muted mb-4">Select your login type:</p>

      <div class="d-flex justify-content-center gap-3 flex-wrap">
        <a href="login.html?role=student" class="btn btn-primary btn-lg px-5">
          Student Login
        </a>
        <a href="login.html?role=admin" class="btn btn-secondary btn-lg px-5">
          Admin Login
        </a>
      </div>

      <p class="mt-4">
        New user? <a href="signup.html" class="text-primary fw-bold">Create an Account</a>
      </p>
    </div>

  </div>

  <!-- Firebase SDK + Auto-redirect -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    // ==== YOUR REAL CONFIG ====
    const firebaseConfig = {
  apiKey: "AIzaSyCosehypmklp8ROxKDI8sEmwRV-kksFtqY",
  authDomain: "career-app-86056.firebaseapp.com",
  projectId: "career-app-86056",
  storageBucket: "career-app-86056.appspot.com", 
  messagingSenderId: "832412818085",
  appId: "1:832412818085:web:01fb3fb2c65c77c76a4b4c"
};
    // ===========================

    const app  = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db   = getFirestore(app);

    // If user is already logged in → send to correct dashboard
    onAuthStateChanged(auth, async (user) => {
      if (!user) return; // not logged in → stay on index

      const uid = user.uid;
      const snap = await getDoc(doc(db, "users", uid));
      const role = snap.exists() ? snap.data().role || "student" : "student";

      const target = role === "admin" ? "admin-dashboard.html" : "student-dashboard.html";
      window.location.replace(target); // hard redirect
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>